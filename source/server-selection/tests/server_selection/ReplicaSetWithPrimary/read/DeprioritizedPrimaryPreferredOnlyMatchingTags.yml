# Test when the deprioritized server is the only server with matching tags.
# Serves as a regression test for CDRIVER-6248.
topology_description:
  type: ReplicaSetWithPrimary
  servers:
  - &1
    address: b:27017
    avg_rtt_ms: 5
    type: RSSecondary
    tags:
      data_center: tokyo
  - &2
    address: c:27017
    avg_rtt_ms: 5
    type: RSSecondary
    tags:
      data_center: tokyo
  - &3
    address: a:27017
    avg_rtt_ms: 5
    type: RSPrimary
    tags:
      data_center: nyc
operation: read
read_preference:
  mode: PrimaryPreferred
  tag_sets:
  - { data_center: nyc }
deprioritized_servers:
- *3
suitable_servers:
- *3 # Deprioritized, but only server matching the tag set.
in_latency_window:
- *3
